<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Case Study 4 • OCTOPUS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Case Study 4">
<meta property="og:description" content="OCTOPUS">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OCTOPUS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/OCTOPUS.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Examples.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/CaseStudy1.html">Case Study 1</a>
    </li>
    <li>
      <a href="../articles/CaseStudy2.html">Case Study 2</a>
    </li>
    <li>
      <a href="../articles/CaseStudy3.html">Case Study 3</a>
    </li>
    <li>
      <a href="../articles/CaseStudy4.html">Case Study 4</a>
    </li>
    <li>
      <a href="../articles/CaseStudy5.html">Case Study 5</a>
    </li>
    <li>
      <a href="../articles/CaseStudy6.html">Case Study 6</a>
    </li>
    <li>
      <a href="../articles/SimulateTrialOutline.html">Simulate Trial Outline</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kwathen/OCTOPUS">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Case Study 4</h1>
                        <h4 class="author">J. Kyle Wathen</h4>
            
            <h4 class="date">2020-06-04</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kwathen/OCTOPUS/blob/master/vignettes/CaseStudy4.Rmd"><code>vignettes/CaseStudy4.Rmd</code></a></small>
      <div class="hidden name"><code>CaseStudy4.Rmd</code></div>

    </div>

    
    
<p>This case study (CS) builds on <a href="https://kwathen.github.io/OCTOPUS/articles/CaseStudy3.html">Case Study 3</a> by adding a second ISA and introduces the concept of simulating the entry type of ISA 2. For simplicity, this case study assumes both ISAs have 2 treatment ( control vs treatment ) and assume the same treatment effect for both experimental arms.</p>
<p>In this case study, the ability to “borrow” control patients is demonstrated for the first time. Each ISA must specify what type of borrowing is done. This allows an ISA to either borrow the control patients or only utilize the patients within the ISA on an ISA level rather than at the trial level, more detail about borrowing below.</p>
<p>For CS 4, we utilize the patient simulator that is included with the package rather than adding a new one.</p>
<p>The R code may be found in the Examples/CaseStudy4</p>
<div id="assumptions" class="section level2">
<h2 class="hasAnchor">
<a href="#assumptions" class="anchor"></a>Assumptions</h2>
<div id="trial-design-elements" class="section level3">
<h3 class="hasAnchor">
<a href="#trial-design-elements" class="anchor"></a>Trial Design Elements</h3>
<ul>
<li>Platform trial with 2 ISAs</li>
<li>No Interim analysis</li>
<li>Final Analysis (FA) when all patients have the outcome observed.</li>
<li>30 patients on control (C) 60 patients on treatment (T)</li>
<li>Primary outcome is repeated measure evaluated at baseline, 4, 8, 12, 16, 20 and 24 weeks after treatment</li>
<li>Analyze difference from baseline to week 24 compared to control using a Bayesian AR(1) model.</li>
<li>Minimum Acceptable Value MAV = 0.5 difference between control and treatment
<ul>
<li>This is the minimum difference between treatment and control <span class="math display">\[ ( \mu_{24} - \mu_0 )_{C} – (\mu_{24} - m_0 )_{T}\]</span>
</li>
</ul>
</li>
<li>Decision Rules
<ul>
<li>Define <span class="math inline">\(\delta_C = ( \mu_{24} - \mu_0 )_{C}\)</span> and <span class="math inline">\(\delta_T = (\mu_{24} - m_0 )_{T}\)</span>
</li>
<li>If <span class="math inline">\(\rho = Pr( \delta_C - \delta_T\)</span> &gt; MAV | data ) <span class="math inline">\(&gt; P_U = 0.8\)</span> then make a “Go” decision</li>
<li>If Pr( <span class="math inline">\(\delta_C - \delta_T\)</span> &gt; MAV | data ) <span class="math inline">\(&lt; P_L = 0.1\)</span> then make a “No Go” decision</li>
<li>Otherwise the decision is indeterminate</li>
</ul>
</li>
</ul>
<p>If the goal at the end of the study is to make a decision of Go or No Go, then <span class="math inline">\(P_U = P_L\)</span>.</p>
<p>In the context of this case study, patient outcomes are not expected to change over the 24 weeks for the control treatment, where as the treatment is expected to decrease the values of the patient outcomes. Thus, <span class="math inline">\(\delta_C - \delta_T\)</span> is expected to be greater than 0 for effective treatments and consequently, high values for <span class="math inline">\(\rho\)</span> indicate an effective treatment.</p>
<p>The function SetupTrialDesign() is located in <a href="https://github.com/kwathen/OCTOPUS/blob/master/inst/Examples/CaseStudy4/TrialDesign.R">TrialDesign.R</a> and the function is called to build the trial object from the BuildMe.R file in this example.</p>
</div>
<div id="simulation-design-elements" class="section level3">
<h3 class="hasAnchor">
<a href="#simulation-design-elements" class="anchor"></a>Simulation Design Elements</h3>
<p>The simulation object contains all information to specify how the trial is simulated. Specifically, it contains a list of scenarios, such as the null and alternative, details about patient accrual rates and in a multiple ISA setting information about how and when the second and subsequent ISAs are added to the trial.</p>
<p>For case study 4, the data for each patient is simulated from a multi-variate normal with a binary covariate. The patient covariate is specified as a responder or non-responder and the outcome value over time is simulated from a MVN with a separate mean vector specified for responders and non-responders. Based on the historical data we have the following means for responders and non-responders shown below is used to specify various scenarios in the simulation study, more detail provided below.</p>
<div id="table-1---true-means" class="section level4">
<h4 class="hasAnchor">
<a href="#table-1---true-means" class="anchor"></a>Table 1 - True Means</h4>
<table class="table">
<caption>True Means</caption>
<thead><tr class="header">
<th></th>
<th align="right">Baseline</th>
<th align="right">Week 4</th>
<th align="right">Week 8</th>
<th align="right">Week 12</th>
<th align="right">Week 16</th>
<th align="right">Week 20</th>
<th align="right">Week 24</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Non-responders</td>
<td align="right">3.5</td>
<td align="right">3.5</td>
<td align="right">3.5</td>
<td align="right">3.5</td>
<td align="right">3.5</td>
<td align="right">3.5</td>
<td align="right">3.5</td>
</tr>
<tr class="even">
<td>Responders</td>
<td align="right">3.5</td>
<td align="right">3.4</td>
<td align="right">3.0</td>
<td align="right">2.5</td>
<td align="right">2.9</td>
<td align="right">1.4</td>
<td align="right">0.9</td>
</tr>
</tbody>
</table>
<p>In addition, the estimates of the variance/covariance over time is</p>
</div>
<div id="table-2---variancecovariance-matrix" class="section level4">
<h4 class="hasAnchor">
<a href="#table-2---variancecovariance-matrix" class="anchor"></a>Table 2 - Variance/Covariance Matrix</h4>
<p><span class="math display">\[V = \begin{bmatrix}0.5&amp;0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.4 \\0.4&amp;0.5&amp;0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.4 \\0.4&amp;0.4&amp;0.5&amp;0.4&amp;0.4&amp;0.4&amp;0.4 \\0.4&amp;0.4&amp;0.4&amp;0.5&amp;0.4&amp;0.4&amp;0.4 \\0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.5&amp;0.4&amp;0.4 \\0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.5&amp;0.4 \\0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.4&amp;0.5 \\\end{bmatrix}\]</span></p>
<p>In general, the responders and non-responders could have different var-cov matrix but for simplicity in this case study they are assumed to be the same.</p>
<p>The trial recruitment is specified in terms of the number of patients accrued per month per site (patients/month/site) and the number of sites open in the platform. For simplicity, the ramp-up in the number of patients/month/site is not applied within a site and recruitment to the platform assumes a Poisson process with the rate equal to the number of patients/month/site * number of sites open.</p>
<p>To specify the scenarios, each treatment specifies a percent of patients that are responders and non-responders. For the control treatment, the percent of responders is 2% in all scenarios. The treatment are varies the percent of responders from 2% (the null case) to 40%.</p>
<p>During the simulation of a virtual trials, a patient is first simulated as a responder or non-responder and then their observed values over time from the corresponding MVN. In this case study, an effective treatment is expected to move patients from the non-responder category to the responder category.</p>
<p>The function SetupSimulations() is located in <a href="https://github.com/kwathen/OCTOPUS/blob/master/inst/Examples/CaseStudy4/SimulationDesign.R">SimulationDesign.R</a> and the function is called to build the simulation object for the BuildMe.R file in this example.</p>
</div>
</div>
</div>
<div id="r-code" class="section level2">
<h2 class="hasAnchor">
<a href="#r-code" class="anchor"></a>R Code</h2>
<p>Begin with the BuildMe.R file. This file loads the OCTOPUS package and sources the design file.<br>
The file TrialDesign.R contains the function necessary to set-up the design object. The file SimulationDesign.R contains the functions necessary to set-up the simulation design. In this case study, it is important to look at both the TrialDesign.R and SimulaitonDesign.R to understand how the addition of a second ISA impacts the trial design and simulation design elements.</p>
</div>
<div id="borrowing-control-patients" class="section level2">
<h2 class="hasAnchor">
<a href="#borrowing-control-patients" class="anchor"></a>Borrowing Control Patients</h2>
<p>In this case study a second ISA is included for the first time. Since borrowing is at the ISA level, each ISA can have a different borrowing approach, eg ISA 1 could perform no borrowing and ISA 2 could utilize patients from ISA 1. There are two parts to determining how data is borrowed across ISAs. The first part is determined by how the dataset is created for analysis (includes control patients for all ISAs or just the specific ISA) and the second part is determined by the analysis method.</p>
<p>In order to share information between ISAs, when a virtual trial is simulated and the dataset created for analysis, the dataset can include data from other ISAs. The code snip below was taken from the <a href="https://github.com/kwathen/OCTOPUS/blob/master/inst/Examples/CaseStudy4/TrialDesign.R">TrialDesign.R</a> and creates the object for ISA 1 is created.</p>
<div class="sourceCode" id="numCode"><pre class="sourceCode numberSource R numberLines"><code class="sourceCode r"><span id="numCode-1"><a href="#numCode-1"></a>    strBorrow &lt;-<span class="st"> "AllControls"</span></span>
<span id="numCode-2"><a href="#numCode-2"></a>    strModel  &lt;-<span class="st"> "BayesianNormalAR1"</span></span>
<span id="numCode-3"><a href="#numCode-3"></a>    vPUpper   &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="fl">1.0</span>, <span class="fl">1.0</span> )</span>
<span id="numCode-4"><a href="#numCode-4"></a>    vPLower   &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="fl">0.0</span>, <span class="fl">0.0</span> )</span>
<span id="numCode-5"><a href="#numCode-5"></a>    dFinalPUpper &lt;-<span class="st"> </span><span class="fl">0.45</span></span>
<span id="numCode-6"><a href="#numCode-6"></a>    dFinalPLower &lt;-<span class="st"> </span><span class="fl">0.05</span></span>
<span id="numCode-7"><a href="#numCode-7"></a></span>
<span id="numCode-8"><a href="#numCode-8"></a>    vQtyPats     &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="dv">30</span>, <span class="dv">60</span> )  <span class="co"># Control, Treatment</span></span>
<span id="numCode-9"><a href="#numCode-9"></a>    vMinQtyPats  &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="dv">90</span>, <span class="dv">90</span> )</span>
<span id="numCode-10"><a href="#numCode-10"></a>    vMinFUTime   &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="dv">24</span><span class="op">*</span><span class="st"> </span>dConvWeeksToMonths, <span class="dv">24</span><span class="op">*</span><span class="st"> </span>dConvWeeksToMonths)</span>
<span id="numCode-11"><a href="#numCode-11"></a>    dQtyMonthsBtwIA  &lt;-<span class="st"> </span><span class="fl">0.0</span></span>
<span id="numCode-12"><a href="#numCode-12"></a></span>
<span id="numCode-13"><a href="#numCode-13"></a>    <span class="co">########################################################################.</span></span>
<span id="numCode-14"><a href="#numCode-14"></a>    <span class="co">#  ISA 1 Information                                                ####</span></span>
<span id="numCode-15"><a href="#numCode-15"></a>    <span class="co">########################################################################.</span></span>
<span id="numCode-16"><a href="#numCode-16"></a></span>
<span id="numCode-17"><a href="#numCode-17"></a>    cISA1Info &lt;-<span class="st"> </span><span class="kw">Create1DosePh2AISA</span>( <span class="dt">vQtyPats     =</span> vQtyPats,</span>
<span id="numCode-18"><a href="#numCode-18"></a>                                     <span class="dt">vTrtLab      =</span> <span class="kw">c</span>( <span class="dv">1</span>, <span class="dv">2</span> ),</span>
<span id="numCode-19"><a href="#numCode-19"></a>                                     <span class="dt">vPUpper      =</span> vPUpper,</span>
<span id="numCode-20"><a href="#numCode-20"></a>                                     <span class="dt">vPLower      =</span> vPLower,</span>
<span id="numCode-21"><a href="#numCode-21"></a>                                     <span class="dt">dFinalPUpper =</span> dFinalPUpper,</span>
<span id="numCode-22"><a href="#numCode-22"></a>                                     <span class="dt">dFinalPLower =</span> dFinalPLower,</span>
<span id="numCode-23"><a href="#numCode-23"></a>                                     <span class="dt">strBorrow    =</span> strBorrow,</span>
<span id="numCode-24"><a href="#numCode-24"></a>                                     <span class="dt">strModel     =</span> strModel,</span>
<span id="numCode-25"><a href="#numCode-25"></a>                                     <span class="dt">vMinQtyPats  =</span> vMinQtyPats,</span>
<span id="numCode-26"><a href="#numCode-26"></a>                                     <span class="dt">vMinFUTime   =</span> vMinFUTime,</span>
<span id="numCode-27"><a href="#numCode-27"></a>                                     <span class="dt">dQtyMonthsBtwIA =</span> dQtyMonthsBtwIA )</span></code></pre></div>
<p>On line 1 in the code block above, the strBorrow is set to “AllControl” and sent as an argument in Create1DosePh2AISA which is included into the design element for ISA 1. A view of the cISA1Info object is provided below, note the red box to highlight the S3 class of AllControls. This class determines how the dataset is created before the analysis is performed. This option will result in the dataset including all control patient data.</p>
<div class="figure">
<img src="TrialDesignObject.png" alt=""><p class="caption">Trial Design Object - Red square to highlight the S3 class type of AllControls</p>
</div>
<p>In this example, the dataset is created with all control patients and the RunAnalysis function determines how to analyze the data. In this example, all control patients are utilized the same regardless of which ISA they were enrolled into. Many approaches for borrowing control patients could be developed, such as hierarchical borrowing, time dependent patient weights or dropping all control patients enrolled prior to the start of an ISA.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by J. Kyle Wathen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>

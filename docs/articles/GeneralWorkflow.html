<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OCTOPUS General Workflow • OCTOPUS</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="OCTOPUS General Workflow">
<meta property="og:description" content="OCTOPUS">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OCTOPUS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.0.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Get started
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/OCTOPUS.html">Overview</a>
    </li>
    <li>
      <a href="../articles/PrimaryObjectsForSimulation.html">Key Simulation Objects</a>
    </li>
    <li>
      <a href="../articles/GeneralWorkflow.html">Workflow</a>
    </li>
    <li>
      <a href="../articles/ExtendingOCTOPUS.html">Extending OCTOPUS</a>
    </li>
    <li>
      <a href="../articles/SimulationReport.html">Example Simulation Report</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Examples.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/CaseStudy1.html">Case Study 1</a>
    </li>
    <li>
      <a href="../articles/CaseStudy2.html">Case Study 2</a>
    </li>
    <li>
      <a href="../articles/CaseStudy3.html">Case Study 3</a>
    </li>
    <li>
      <a href="../articles/CaseStudy4.html">Case Study 4</a>
    </li>
    <li>
      <a href="../articles/CaseStudy5.html">Case Study 5</a>
    </li>
    <li>
      <a href="../articles/CaseStudy6.html">Case Study 6</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/SimulateTrialOutline.html">Simulation Overview</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kwathen/OCTOPUS">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="GeneralWorkflow_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>OCTOPUS General Workflow</h1>
                        <h4 class="author">J. Kyle Wathen</h4>
            
            <h4 class="date">2021-10-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kwathen/OCTOPUS/blob/master/vignettes/GeneralWorkflow.Rmd"><code>vignettes/GeneralWorkflow.Rmd</code></a></small>
      <div class="hidden name"><code>GeneralWorkflow.Rmd</code></div>

    </div>

    
    
<div id="octopus-general-workflow" class="section level1">
<h1 class="hasAnchor">
<a href="#octopus-general-workflow" class="anchor"></a>OCTOPUS General Workflow</h1>
<p>Simulating a platform trial requires many details to be specified. In general, once OCTOPUS is installed the user will create a new project with project specific files that will build the required structures and run the simulations. This section walks through the general steps involved to go from having OCTOPUS installed to running your first simulation.</p>
<p>To illustrate the typically workflow, an example is walked through in the next steps.</p>
<p>Example Platform Trial</p>
<ul>
<li>3 ISAs, each with experimental treatment and the same control</li>
<li>ISA 1 - 50 patients on control, 100 experimental, ISA 2&amp;3 - 25 patients on control, 125 on experimental treatment</li>
<li>ISA 1 is open at the start of the trial, ISA 2 will open at month 6, ISA 3 will open at month 12</li>
<li>Primary outcome is binary</li>
<li>Use a Bayesian Beta Binomial model</li>
</ul>
<p>For this example, assume that the analysis and binary outcome is not part of OCTOPUS and are new functions for this hypothetical example.</p>
<div id="step-1---create-project" class="section level2">
<h2 class="hasAnchor">
<a href="#step-1---create-project" class="anchor"></a>Step 1 - Create Project</h2>
<p>At the start of a project you will typically make a call to <a href="../reference/CreateProject.html">OCTOPUS::CreateProject</a> with some initial information about the trial you are trying to simulate. The CreateProject-XXX files in the <a href="https://github.com/kwathen/OCTOPUS-Examples">OCTOPUS-Examples Repo</a> are very helpful.</p>
<p>Example of a CreateProject.R file.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span> <span class="va"><a href="https://github.com/kwathen/OCTOPUS">OCTOPUS</a></span> <span class="op">)</span>
<span class="va">strProjDir</span>                 <span class="op">&lt;-</span> <span class="st">""</span>   <span class="co"># Since this is not a complete path, directory is created relative to working directory when this file is executed</span>
<span class="va">strProjName</span>                <span class="op">&lt;-</span> <span class="st">"ThreeISA"</span>
<span class="va">strAnalysis</span>                <span class="op">&lt;-</span> <span class="st">"BetaBinomial"</span>
<span class="va">strSimPatOutcome</span>           <span class="op">&lt;-</span> <span class="st">"Binary"</span>
<span class="va">strBorrowing</span>               <span class="op">&lt;-</span> <span class="st">"AllControls"</span>

<span class="co"># The matrix  mQtyPats contains the number of patients in each arm in each ISA.  Each row represents an ISA, each column is</span>
<span class="co"># a treatment with the first column the number of patients in control.  The first ISA (row 1) has 50 patients on control</span>
<span class="co"># 100 on treatment 2.  The second ISA (row 2) has 25 patients on control and 125 on treatment 2</span>
<span class="co"># the third ISA has 25 on control and 125 on treatment.  </span>
<span class="va">mQtyPats</span>                   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="fl">50</span>, <span class="fl">100</span>,
                                         <span class="fl">25</span>, <span class="fl">125</span>,
                                         <span class="fl">25</span>, <span class="fl">125</span><span class="op">)</span>, byrow<span class="op">=</span><span class="cn">TRUE</span>, ncol<span class="op">=</span><span class="fl">2</span> <span class="op">)</span>
<span class="va">dQtyMonthsFU</span>               <span class="op">&lt;-</span> <span class="fl">6</span>
<span class="va">bCreateProjectSubdirectory</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span>
<span class="va">nQtyReps</span>                   <span class="op">&lt;-</span> <span class="fl">10</span> <span class="co"># Small number of reps so you can run the default simulation quickly, increase as needed</span>
<span class="va">vISAStartTimes</span>             <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="fl">0</span>, <span class="fl">6</span>, <span class="fl">12</span>  <span class="op">)</span>

<span class="va">strResult</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/CreateProject.html">CreateProject</a></span><span class="op">(</span> strProjectDirectory        <span class="op">=</span> <span class="va">strProjDir</span>,
                            strProjectName             <span class="op">=</span> <span class="va">strProjName</span>,
                            strAnalysisName            <span class="op">=</span> <span class="va">strAnalysis</span>,
                            strSimPatientOutcomeName   <span class="op">=</span> <span class="va">strSimPatOutcome</span>,
                            strBorrowing               <span class="op">=</span> <span class="va">strBorrowing</span>,
                            nQtyReps                   <span class="op">=</span> <span class="va">nQtyReps</span>,
                            mQtyPatientsPerArm         <span class="op">=</span> <span class="va">mQtyPats</span>,
                            dQtyMonthsFU               <span class="op">=</span> <span class="va">dQtyMonthsFU</span>,
                            vISAStartTimes             <span class="op">=</span> <span class="va">vISAStartTimes</span>,
                            bCreateProjectSubdirectory <span class="op">=</span> <span class="va">bCreateProjectSubdirectory</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span> <span class="va">strResult</span><span class="op">)</span></code></pre></div>
</div>
<div id="step-2---open-the-new-project" class="section level2">
<h2 class="hasAnchor">
<a href="#step-2---open-the-new-project" class="anchor"></a>Step 2 - Open The New Project</h2>
<p>Executing the code above will create a folder called ThreeISA in the working directory. In this folder, there will be an R Studio project file named ThreeISA.Rproj. Open the project file. One the project is open, or if you are not using R Studio, begin with the BuilMe.R file. When the project is create, the BuildMe.R is designed so that you can execute an initial simulation with the file as is, eg no changes required. Execute all the code in the file or source the file, source(“BuildMe.R”). It is recommended that you use a small number of replications so the initial simulations will execute quickly. If you make no changes before running the code, you should see something similar to the following.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  1  of  3  Designs,  Scenario  1  of  4  scenarios ..."</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  1  of  3  Designs,  Scenario  2  of  4  scenarios ..."</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  1  of  3  Designs,  Scenario  3  of  4  scenarios ..."</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  1  of  3  Designs,  Scenario  4  of  4  scenarios ..."</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  2  of  3  Designs,  Scenario  1  of  4  scenarios ..."</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  2  of  3  Designs,  Scenario  2  of  4  scenarios ..."</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  2  of  3  Designs,  Scenario  3  of  4  scenarios ..."</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  2  of  3  Designs,  Scenario  4  of  4  scenarios ..."</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  3  of  3  Designs,  Scenario  1  of  4  scenarios ..."</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  3  of  3  Designs,  Scenario  2  of  4  scenarios ..."</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  3  of  3  Designs,  Scenario  3  of  4  scenarios ..."</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"Simulating Design  3  of  3  Designs,  Scenario  4  of  4  scenarios ..."</span></span></code></pre></div>
<p>Once the simulation is complete you will see file(s) in the output (output files about the trial without ISA specific info), ISAOut1, ISAOut2, ISAOut3 where the ISAOutX folder contain the output files with details about each ISA. Thhre is also an enrollment folder which contains information about the enrollment for each simulated trial.</p>
</div>
<div id="step-3---post-process-results" class="section level2">
<h2 class="hasAnchor">
<a href="#step-3---post-process-results" class="anchor"></a>Step 3 - Post Process Results</h2>
<p>One of the final steps in running simulations with OCTOPUS is to combine the input and produce a graph or report. In the folder that was created in Step 1 there is a file called SimulationReport.Rmd. This file provides an example of a simulation report but is only included as an example and easy way to post process the simulation results and create a report with simulation results. Open this SimulationReport.Rmd and Knit it.</p>
</div>
<div id="step-4---more-efficient-simulations" class="section level2">
<h2 class="hasAnchor">
<a href="#step-4---more-efficient-simulations" class="anchor"></a>Step 4 - More Efficient Simulations</h2>
<p>Simulating a platform trial can be time consuming and as such and example to illustrate using multiple cores on the same system is provided in the BuildMeRunMultiCore.R which will utilize more cores if they are available, allowing the simulation to run faster.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by J. Kyle Wathen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
